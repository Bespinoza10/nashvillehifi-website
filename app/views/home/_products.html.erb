<!-- Slick workaround for TurboLinks -->
<% content_for :head do %>
  <meta name="turbolinks-cache-control" content="no-cache">
<% end %>

<div id="products" class="row">
  <div class="container">
    <div class="product-title-container col s12 m12 l12">
      <% if user_signed_in? %>
        <div class="col s10">
          <h1>Products</h1>
          <hr>
          <p>Don't see the product you need? Don't worry. These are just our most popular products. We offer a lot more. Feel free to contact us or pass by the store.</p>
        </div>
        <div class="col s2">
          <%= link_to "Add", new_product_path, class: "btn btn-blue" %>
        </div>
      <% else %>
        <h1>Products</h1>  
        <hr>
        <p>Don't see the product you need? Don't worry. These are just our most popular products. We offer a lot more. Feel free to contact us or pass by the store.</p>
      <% end %>
    </div>
  </div>
  <div class="col s12" id="all-products">
    <div id="streaming-audio" class="col s12">
      <div class="container">
        <h3>Streaming Audio</h3>
      </div>
      <div class="col s12 slick-slider">
        <div class="multiple-items">
          <% @products.each do |prod| %>
            <% @prod_streaming = prod.product_type === "Streaming Audio" %>
            <% if @prod_streaming.present? %>
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
    <div id="amplifiers" class="col s12">
      <div class="container">
        <h3>Amplifiers</h3>
      </div>
      <div class="col s12 slick-slider">
        <div class="multiple-items">
          <% @products.each do |prod| %>
            <% @prod_amps = prod.product_type === "Amplifiers" %>
            <% if @prod_amps.present? %>
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <div id="preamps" class="col s12">
      <div class="container">
        <h3>Preamps</h3>
      </div>
      <div class="col s12 slick-slider">
        <div class="multiple-items">
          <% @products.each do |prod| %>
            <% @prod_preamps = prod.product_type === "Preamps" %>
            <% if @prod_preamps.present? %>
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <div id="integrated-amps" class="col s12">
      <div class="container">
        <h3>Integrated Amps</h3>
      </div>
      <div class="col s12 slick-slider">
        <div class="multiple-items">
          <% @products.each do |prod| %>
            <% @prod_intamps = prod.product_type === "Integrated Amps" %>
            <% if @prod_intamps.present? %>
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <div id="speakers" class="col s12">
      <div class="container">
        <h3>Speakers</h3>
      </div>
      <div class="col s12 slick-slider">
        <div class="multiple-items">
          <% @products.each do |prod| %>
            <% @prod_speakers = prod.product_type === "Speakers" %>
            <% if @prod_speakers.present? %>
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <div id="cables" class="col s12">
      <div class="container">
        <h3>Cables and Interconnects</h3>
      </div>
      <div class="col s12 slick-slider">
        <div class="multiple-items">
          <% @products.each do |prod| %>
            <% @prod_cables = prod.product_type === "Cables and Interconnects" %>
            <% if @prod_cables.present? %>
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <div id="headphones" class="col s12">
      <div class="container">
        <h3>Headphones</h3>
      </div>
      <div class="col s12 slick-slider">
        <div class="multiple-items">
          <% @products.each do |prod| %>
            <% @prod_headphones = prod.product_type === "Headphones" %>
            <% if @prod_headphones.present? %>
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
    <div id="turntables" class="col s12">
      <div class="container">
        <h3>Turntables</h3>
      </div>
      <div class="col s12 slick-slider">
        <div class="multiple-items">
          <% @products.each do |prod| %>
            <% @prod_turntables = prod.product_type === "Turntables" %>
            <% if @prod_turntables.present? %>
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
    <script>
      $('.multiple-items').slick({
        infinite: true,
        slidesToShow: 3,
        slidesToScroll: 3,
        autoplay: true,
        pauseOnHover: false,
        pauseOnFocus: false
      });
    </script>
  </div>
</div>